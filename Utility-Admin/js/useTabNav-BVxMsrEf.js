import{t as s,n as t,u as w}from"./index-xbJnZt5W.js";import{D as y,ae as H,x as D,v as T,E as k,k as f,av as F}from"./.pnpm-DTVa1Nkx.js";const M=[{label:s("common.tabAction.current"),icon:"CloseOutlined",value:t.CLOSE_CURRENT},{label:s("common.tabAction.maximize"),icon:"FullscreenOutlined",value:t.MAXMIZE},{label:s("common.tabAction.reload"),icon:"ReloadOutlined",value:t.RELOAD},{label:s("common.tabAction.newOpen"),icon:"ExportOutlined",value:t.NEW_WINDOW_OPENS},{label:s("common.tabAction.left"),icon:"VerticalRightOutlined",value:t.CLOSE_LEFT,divided:!0},{label:s("common.tabAction.right"),icon:"VerticalLeftOutlined",value:t.CLOSE_RIGHT},{label:s("common.tabAction.other"),icon:"SwapOutlined",value:t.CLOSE_OTHER,divided:!0},{label:s("common.tabAction.all"),icon:"RetweetOutlined",value:t.CLOSE_ALL}],U=()=>{const u=y(),i=H(),_=w(),{tabNav:a,HomeMenu:r,currentDisabledActionItems:E,contentRef:I,menus:P}=D(_),O=T(u.fullPath),g=T(new Set);function L(l){var n;const e=typeof l=="string"?l:u.fullPath;if(e===((n=r.value)==null?void 0:n.key)&&a.value.length===1){v();return}if(e===u.fullPath){const o=a.value.findIndex(c=>c.path===e)-1;o>=0&&i.push(a.value[o].path)}a.value=a.value.filter(o=>o.path!==e),!a.value.length&&i.push("/"),d()}function v(){i.replace({path:`/redirect${u.fullPath}`,query:u.query})}function b(l=u.fullPath){const e=a.value.findIndex(n=>n.path===l);e!==0&&(a.value=a.value.filter((n,o)=>{var c;return o>=e||n.path===((c=r.value)==null?void 0:c.key)}),i.push(l),d())}function p(l=u.fullPath){const e=a.value.findIndex(n=>n.path===l);a.value=a.value.filter((n,o)=>{var c;return o<=e||n.path===((c=r.value)==null?void 0:c.key)}),i.push(l),d()}function m(){a.value=[],i.push("/")}function R(l=u.fullPath){a.value=a.value.filter(e=>{var n;return e.path===l||e.path===((n=r.value)==null?void 0:n.key)}),i.push(l),d()}function d(l=u.fullPath,e=E){var o,c,A;f(e).clear();const n=a.value.findIndex(h=>h.path===l);n<=1&&(f(e).add(t.CLOSE_LEFT),l!==((o=r.value)==null?void 0:o.key)&&a.value.length<=2&&a.value.some(h=>{var C;return h.path===((C=r.value)==null?void 0:C.key)})&&f(e).add(t.CLOSE_OTHER),l===((c=r.value)==null?void 0:c.key)&&a.value.length===1&&f(e).add(t.CLOSE_OTHER),l===((A=r.value)==null?void 0:A.key)&&(f(e).add(t.CLOSE_ALL),f(e).add(t.CLOSE_CURRENT))),n===a.value.length-1&&f(e).add(t.CLOSE_RIGHT)}function S(){const{toggle:l}=F(I);l()}function x(l=u.fullPath){const e=i.resolve(l);window.open(e.href,"_blank")}const N={[t.RELOAD]:v,[t.CLOSE_ALL]:m,[t.CLOSE_CURRENT]:L,[t.CLOSE_LEFT]:b,[t.CLOSE_RIGHT]:p,[t.CLOSE_OTHER]:R,[t.MAXMIZE]:S,[t.NEW_WINDOW_OPENS]:x};return k(()=>[u.fullPath,P.value],()=>{O.value=u.fullPath,d()}),{tabNav:a,currentDisabledActionItems:E,targetDisabledActionItems:g,actionMenu:M,currentKey:O,closeTab:L,reload:v,closeLeftTab:b,closeRightTab:p,closeAllTab:m,closeOtherTab:R,forbiddenActionItems:d,fullscreenAboutContent:S,executeFuncs:N}};export{U as u};

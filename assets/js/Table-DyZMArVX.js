import{l as F}from"./lodash-BA5lSfMf.js";import{l as W}from"./vue-draggable-plus-WlOHM_yN.js";import{t as X,P as H,o as K,aa as L,h as M,f as Y,D as q,u as G,v as J,_ as Q}from"./ant-design-vue-0a5K7RUJ.js";import{X as Z,am as ee,Y as te}from"./@ant-design-68FpZE7s.js";import{d as oe,C as ne,r as w,a as se,A as ae,o as p,b as _,j as d,t as c,ac as C,c as n,a8 as o,aj as le,m as g,u as s,a6 as re,W as i,F as x,a7 as ce,e as ie,X as de,ak as ue,al as pe,ab as me,ae as _e,af as fe}from"./@vue-D377Yz3Q.js";import{_ as he}from"./index-BbXLtVbP.js";const ke=[{title:"紧凑",key:"small"},{title:"中等",key:"middle"},{title:"宽松",key:"large"}],ge={title:{type:String,default:""},size:{type:String,default:"middle"},columns:{type:Array,default:()=>[]}},be=u=>(_e("data-v-49a22bd6"),u=u(),fe(),u),ve={class:"u-table",bg:"[var(--common-bg-color)]","p-2":"","px-4":"","rounded-1.5":""},ye={class:"u-table-header","mt-1.5":"","mb-3":"",flex:"","items-center":"","justify-between":""},Se={class:"u-table-title","text-16px":""},we={class:"u-table-tools",flex:"","items-center":""},Ce={class:"u-table-tools-icon","text-18px":""},xe={"px-2.5":"","py-2":"","whitespace-nowrap":"",flex:"","items-center":"","justify-between":""},$e=be(()=>d("div",{class:"i-ri:draggable handle","cursor-move":"","text-20px":""},null,-1)),ze=oe({name:"Table",__name:"Table",props:ge,emits:["reload"],setup(u,{emit:$}){const f=u,z=$,I=ne(()=>Object.keys(me()).filter(e=>e!=="title")),b=X.useToken().token,m=w(f.size),P=e=>{m.value=e.key},r=se({checked:!0,indeterminate:!1}),l=w([]),v=()=>(r.checked=!0,r.indeterminate=!1,F.cloneDeep(f.columns).map(e=>({...e,isShow:!0}))),B=()=>{l.value.forEach(e=>{e.isShow=!r.checked}),r.indeterminate=!1},T=()=>{const e=l.value.some(a=>!a.isShow);r.checked=!e,r.indeterminate=l.value.every(a=>!a.isShow)?!1:e};return ae(()=>f.columns,()=>{l.value=v()},{deep:!0,immediate:!0}),(e,a)=>{const y=H,V=Z,h=K,j=ee,D=M,O=Y,U=q,S=G,A=J,E=te,N=Q,R=L;return p(),_("div",ve,[d("div",ye,[d("div",Se,c(e.title),1),d("div",we,[C(e.$slots,"pre-tools",{},void 0,!0),d("div",Ce,[n(y,{type:"vertical","mx-3":""}),n(h,null,{title:o(()=>[i(c(e.$t("common.refresh")),1)]),default:o(()=>[n(V,{"cursor-pointer":"","mr-3":"",onClick:a[0]||(a[0]=t=>z("reload"))})]),_:1}),n(h,null,{title:o(()=>[i(c(e.$t("components.table.density")),1)]),default:o(()=>[n(U,{trigger:"click",placement:"bottom"},{overlay:o(()=>[n(O,{onClick:P},{default:o(()=>[(p(!0),_(x,null,g(s(ke),t=>(p(),ce(D,{key:t.key,style:ie({backgroundColor:s(m)===t.key?s(b).colorPrimaryBg:"",color:s(m)===t.key?s(b).colorPrimary:""})},{default:o(()=>[i(c(t.title),1)]),_:2},1032,["style"]))),128))]),_:1})]),default:o(()=>[n(j,{"cursor-pointer":"","mr-3":""})]),_:1})]),_:1}),n(h,null,{title:o(()=>[i(c(e.$t("common.setting")),1)]),default:o(()=>[n(N,{trigger:"click",placement:"bottom",arrow:!1,overlayInnerStyle:{padding:"0px",minWidth:"160px"}},{content:o(()=>[d("div",xe,[n(S,{checked:s(r).checked,"onUpdate:checked":a[1]||(a[1]=t=>s(r).checked=t),indeterminate:s(r).indeterminate,onClick:B},{default:o(()=>[i(c(e.$t("components.table.columns")),1)]),_:1},8,["checked","indeterminate"]),n(A,{type:"link",onClick:a[2]||(a[2]=t=>l.value=v())},{default:o(()=>[i(c(e.$t("components.table.reset")),1)]),_:1})]),n(y,{style:{margin:"unset"}}),n(s(W),{modelValue:s(l),"onUpdate:modelValue":a[3]||(a[3]=t=>de(l)?l.value=t:null),animation:150,handle:".handle","p-2":"",flex:"","flex-col":"","gap-2":""},{default:o(()=>[(p(!0),_(x,null,g(s(l),t=>(p(),_("div",{key:t.dataIndex,"rounded-1.5":"","whitespace-nowrap":"",flex:"","items-center":"","gap-2":""},[$e,n(S,{checked:t.isShow,"onUpdate:checked":k=>t.isShow=k,onChange:T},{default:o(()=>[i(c(t.title),1)]),_:2},1032,["checked","onUpdate:checked"])]))),128))]),_:1},8,["modelValue"])]),default:o(()=>[n(E,{"cursor-pointer":"","mr-3":""})]),_:1})]),_:1})])])]),n(R,re(e.$attrs,{size:s(m),columns:s(l).filter(t=>t.isShow)}),le({_:2},[g(s(I),t=>({name:t,fn:o(k=>[C(e.$slots,t,ue(pe(k||{})),void 0,!0)])}))]),1040,["size","columns"])])}}}),De=he(ze,[["__scopeId","data-v-49a22bd6"]]);export{De as _};

import{w as z}from"./index-DzeB-HuZ.js";import{d as k,C as U,r as f,a as $,o as x,b as w,j as l,c as o,u as t,ac as O,w as T,R as M,a8 as s,l as S,e as V,ah as j,a9 as L,A as W,a7 as A,X as H,W as N,t as D}from"./@vue-D377Yz3Q.js";import{M as I}from"./vue-cropper-BIvEaLce.js";import{o as Z,v as R,M as F,Z as E}from"./ant-design-vue-0a5K7RUJ.js";import{ag as X,ah as q,ai as G,aj as J,a4 as K}from"./@ant-design-68FpZE7s.js";const P={class:"basic-resizer w-full flex"},Q={class:"min-h-380px flex-grow-1"},Y={class:"h-90%"},ee={key:0,class:"mt-2 flex justify-between"},oe={class:"flex items-center mx-30px"},te={class:"preview-box overflow-hidden w-250px h-250px border border-solid border-#ccc rounded-1/2 dark:border-#303030"},ne=["src"],B=k({name:"BasicResizer",__name:"BasicResizer",props:{imgUrl:{type:String,default:""},actions:{type:Boolean,default:!0}},setup(m,{expose:g}){const d=m,v=U(()=>d.imgUrl.length),n=f(),a=$({autoCropWidth:250,autoCropHeight:250,outputType:"png",autoCrop:!0,fixedBox:!1}),r=f({url:"",img:null}),h=i=>{r.value=i};return g({cropper:n}),(i,e)=>{const p=X,u=R,c=Z,y=q,C=G,_=J;return x(),w("div",P,[l("div",Q,[l("div",Y,[o(t(I),{ref_key:"cropper",ref:n,img:m.imgUrl,info:!0,autoCrop:t(a).autoCrop,autoCropWidth:t(a).autoCropWidth,autoCropHeight:t(a).autoCropHeight,fixedBox:t(a).fixedBox,outputType:t(a).outputType,onRealTime:h},null,8,["img","autoCrop","autoCropWidth","autoCropHeight","fixedBox","outputType"])]),m.actions?(x(),w("div",ee,[l("div",null,[O(i.$slots,"prefixAction")]),T(l("div",null,[o(c,{title:i.$t("components.resizer.zoomIn"),placement:"bottom"},{default:s(()=>[o(u,{type:"primary",onClick:e[0]||(e[0]=b=>t(n).changeScale(1.1))},{icon:s(()=>[o(p)]),_:1})]),_:1},8,["title"]),o(c,{title:i.$t("components.resizer.zoomOut"),placement:"bottom"},{default:s(()=>[o(u,{type:"primary",onClick:e[1]||(e[1]=b=>t(n).changeScale(-1.1))},{icon:s(()=>[o(y)]),_:1})]),_:1},8,["title"]),o(c,{title:i.$t("components.resizer.clockwise"),placement:"bottom"},{default:s(()=>[o(u,{type:"primary",onClick:e[2]||(e[2]=b=>t(n).rotateRight())},{icon:s(()=>[o(C)]),_:1})]),_:1},8,["title"]),o(c,{title:i.$t("components.resizer.anticlockwise"),placement:"bottom"},{default:s(()=>[o(u,{type:"primary",onClick:e[3]||(e[3]=b=>t(n).rotateLeft())},{icon:s(()=>[o(_)]),_:1})]),_:1},8,["title"])],512),[[M,t(v)]])])):S("",!0)]),l("div",oe,[l("div",te,[l("img",{src:t(r).url,style:V(t(r).img)},null,12,ne)])])])}}}),se=k({__name:"UploadResizerModal",props:{modelValue:{type:Boolean,default:!1},modelModifiers:{}},emits:j(["submit"],["update:modelValue"]),setup(m,{emit:g}){const d=L(m,"modelValue"),v=g,n=f([]),a=f("");W(n,()=>{if(!n.value[0])return;const e=new FileReader;e.readAsDataURL(n.value[0].originFileObj),e.onload=()=>{a.value=e.result}},{deep:!0});const r=f(),h=()=>{r.value.cropper.getCropBlob(e=>{v("submit",e)})},i=()=>{d.value=!1,n.value=[],a.value=""};return(e,p)=>{const u=K,c=R,y=E,C=F;return x(),A(C,{open:d.value,"onUpdate:open":p[1]||(p[1]=_=>d.value=_),title:e.$t("components.resizer.modalTitle"),okText:e.$t("components.resizer.ok"),width:"800px",onOk:h,onCancel:i},{default:s(()=>[o(B,{ref_key:"basicResizerRef",ref:r,imgUrl:t(a)},{prefixAction:s(()=>[o(y,{"file-list":t(n),"onUpdate:fileList":p[0]||(p[0]=_=>H(n)?n.value=_:null),accept:"image/png, image/jpeg, image/jpg",maxCount:1,showUploadList:!1,beforeUpload:()=>!1},{default:s(()=>[o(c,{type:"primary"},{icon:s(()=>[o(u)]),default:s(()=>[N(" "+D(e.$t("components.resizer.choose")),1)]),_:1})]),_:1},8,["file-list"])]),_:1},8,["imgUrl"])]),_:1},8,["open","title","okText"])}}}),ue=z(B),ce=z(se);export{ue as B,ce as U};

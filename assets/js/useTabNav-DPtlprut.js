import{t as s,n as t,u as w}from"./index-BbXLtVbP.js";import{s as y}from"./pinia-B1Iyq0wd.js";import{d as H}from"./@vueuse-BRxBMKk3.js";import{u as D,d as F}from"./vue-router-CZk6BKTr.js";import{r as T,A as M,u as f}from"./@vue-D377Yz3Q.js";const W=[{label:s("common.tabAction.current"),icon:"CloseOutlined",value:t.CLOSE_CURRENT},{label:s("common.tabAction.maximize"),icon:"FullscreenOutlined",value:t.MAXMIZE},{label:s("common.tabAction.reload"),icon:"ReloadOutlined",value:t.RELOAD},{label:s("common.tabAction.newOpen"),icon:"ExportOutlined",value:t.NEW_WINDOW_OPENS},{label:s("common.tabAction.left"),icon:"VerticalRightOutlined",value:t.CLOSE_LEFT,divided:!0},{label:s("common.tabAction.right"),icon:"VerticalLeftOutlined",value:t.CLOSE_RIGHT},{label:s("common.tabAction.other"),icon:"SwapOutlined",value:t.CLOSE_OTHER,divided:!0},{label:s("common.tabAction.all"),icon:"RetweetOutlined",value:t.CLOSE_ALL}],X=()=>{const u=D(),i=F(),_=w(),{tabNav:l,HomeMenu:r,currentDisabledActionItems:O,contentRef:I,menus:P}=y(_),E=T(u.fullPath),g=T(new Set);function p(a){var n;const e=typeof a=="string"?a:u.fullPath;if(e===((n=r.value)==null?void 0:n.key)&&l.value.length===1){v();return}if(e===u.fullPath){const o=l.value.findIndex(c=>c.path===e)-1;o>=0&&i.push(l.value[o].path)}l.value=l.value.filter(o=>o.path!==e),!l.value.length&&i.push("/"),d()}function v(){i.replace({path:`/redirect${u.fullPath}`,query:u.query})}function m(a=u.fullPath){const e=l.value.findIndex(n=>n.path===a);e!==0&&(l.value=l.value.filter((n,o)=>{var c;return o>=e||n.path===((c=r.value)==null?void 0:c.key)}),i.push(a),d())}function L(a=u.fullPath){const e=l.value.findIndex(n=>n.path===a);l.value=l.value.filter((n,o)=>{var c;return o<=e||n.path===((c=r.value)==null?void 0:c.key)}),i.push(a),d()}function b(){l.value=[],i.push("/")}function R(a=u.fullPath){l.value=l.value.filter(e=>{var n;return e.path===a||e.path===((n=r.value)==null?void 0:n.key)}),i.push(a),d()}function d(a=u.fullPath,e=O){var o,c,A;f(e).clear();const n=l.value.findIndex(h=>h.path===a);n<=1&&(f(e).add(t.CLOSE_LEFT),a!==((o=r.value)==null?void 0:o.key)&&l.value.length<=2&&l.value.some(h=>{var C;return h.path===((C=r.value)==null?void 0:C.key)})&&f(e).add(t.CLOSE_OTHER),a===((c=r.value)==null?void 0:c.key)&&l.value.length===1&&f(e).add(t.CLOSE_OTHER),a===((A=r.value)==null?void 0:A.key)&&(f(e).add(t.CLOSE_ALL),f(e).add(t.CLOSE_CURRENT))),n===l.value.length-1&&f(e).add(t.CLOSE_RIGHT)}function S(){const{toggle:a}=H(I);a()}function x(a=u.fullPath){const e=i.resolve(a);window.open(e.href,"_blank")}const N={[t.RELOAD]:v,[t.CLOSE_ALL]:b,[t.CLOSE_CURRENT]:p,[t.CLOSE_LEFT]:m,[t.CLOSE_RIGHT]:L,[t.CLOSE_OTHER]:R,[t.MAXMIZE]:S,[t.NEW_WINDOW_OPENS]:x};return M(()=>[u.fullPath,P.value],()=>{E.value=u.fullPath,d()}),{tabNav:l,currentDisabledActionItems:O,targetDisabledActionItems:g,actionMenu:W,currentKey:E,closeTab:p,reload:v,closeLeftTab:m,closeRightTab:L,closeAllTab:b,closeOtherTab:R,forbiddenActionItems:d,fullscreenAboutContent:S,executeFuncs:N}};export{X as u};

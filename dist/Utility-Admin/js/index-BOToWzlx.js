import{k as z,b as G,h as Z}from"./index-DLU_U3ea.js";import{_ as j}from"./Table-CeRq0Wkw.js";import{u as J,a as W}from"./useFormValue-Bnx1_Y6g.js";import{n as F,aP as D,V as X,f as Y,I as A,v,E as Q,o as V,J as $,K as t,O as e,k as a,am as d,aY as U,aZ as h,a9 as ee,a8 as te,a as H,c0 as ae,c1 as le,bd as ne,bZ as oe,b_ as se,a4 as ue,b$ as de,c3 as ie,aV as re,bc as pe,au as _e,F as p,ay as me,c4 as fe,an as E,aU as q,bG as ce,bg as ve,c2 as ye,bH as ge,G as be,X as M,bF as we}from"./.pnpm-DTVa1Nkx.js";const xe=F({__name:"SetMenuModal",props:D({isEdit:{type:Boolean,default:!1},data:{type:Object,default:()=>({})},treeData:{type:Array,default:()=>[]}},{open:{type:Boolean},openModifiers:{}}),emits:D(["reload"],["update:open"]),setup(y,{emit:w}){const s=y,_=X(y,"open"),x=Y(()=>s.isEdit?"编辑菜单":"新增菜单"),c=w,{t:k}=A(),I=v(),{form:l,resetFormValue:P,setFormValue:R}=J({title:"",type:0,path:"",parentId:null,icon:"",order:null,permission:"",status:0,isShow:1,isHomePage:1,keepAlive:1,isLink:0}),S=async()=>{await I.value.validate(),H.success("操作成功"),c("reload"),g()},g=()=>{P(),_.value=!1};return Q(()=>_.value,()=>{_.value&&s.isEdit&&(R(s.data),l.value.title=k(s.data.title))}),(m,n)=>{const u=ae,f=le,i=ne,r=oe,b=se,C=ue,K=de,L=z,O=ie,B=re,N=pe,T=_e;return V(),$(T,{open:_.value,"onUpdate:open":n[12]||(n[12]=o=>_.value=o),title:a(x),width:"750px",onOk:S,onCancel:g},{default:t(()=>[e(N,{class:"mt-6",ref_key:"formRef",ref:I,model:a(l),layout:"horizontal","label-col":{span:7}},{default:t(()=>[e(b,null,{default:t(()=>[e(r,{span:12},{default:t(()=>[e(i,{label:"菜单类型",name:"type",required:""},{default:t(()=>[e(f,{value:a(l).type,"onUpdate:value":n[0]||(n[0]=o=>a(l).type=o),"button-style":"solid"},{default:t(()=>[e(u,{value:0},{default:t(()=>[d("目录")]),_:1}),e(u,{value:1},{default:t(()=>[d("菜单")]),_:1}),e(u,{value:2},{default:t(()=>[d("按钮")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),e(b,{gutter:24},{default:t(()=>[e(r,{span:12},{default:t(()=>[e(i,{label:"菜单名称",name:"title",required:""},{default:t(()=>[e(C,{value:a(l).title,"onUpdate:value":n[1]||(n[1]=o=>a(l).title=o),placeholder:"请输入菜单名称",allowClear:""},null,8,["value"])]),_:1})]),_:1}),U(e(r,{span:12},{default:t(()=>[e(i,{label:"路径",name:"path",required:""},{default:t(()=>[e(C,{value:a(l).path,"onUpdate:value":n[2]||(n[2]=o=>a(l).path=o),placeholder:"请输入路径",allowClear:""},null,8,["value"])]),_:1})]),_:1},512),[[h,a(l).type!==2]]),e(r,{span:12},{default:t(()=>[e(i,{label:"上级菜单",name:"parentId"},{default:t(()=>[e(K,{value:a(l).parentId,"onUpdate:value":n[3]||(n[3]=o=>a(l).parentId=o),placeholder:"请选择部门","allow-clear":"","tree-data":y.treeData,"tree-node-filter-prop":"title","field-names":{children:"children",label:"title",value:"id"}},{title:t(({title:o})=>[d(ee(m.$t(o)),1)]),_:1},8,["value","tree-data"])]),_:1})]),_:1}),U(e(r,{span:12},{default:t(()=>[e(i,{label:"图标",name:"icon"},{default:t(()=>[e(O,null,{default:t(()=>[e(L,{modelValue:a(l).icon,"onUpdate:modelValue":n[4]||(n[4]=o=>a(l).icon=o)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},512),[[h,a(l).type!==2]]),e(r,{span:12},{default:t(()=>[e(i,{label:"排序",name:"order",required:""},{default:t(()=>[e(B,{value:a(l).order,"onUpdate:value":n[5]||(n[5]=o=>a(l).order=o),min:1,placeholder:"请输入排序",style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),e(r,{span:12},{default:t(()=>[e(i,{label:"权限标识",name:"permission",required:""},{default:t(()=>[e(C,{value:a(l).permission,"onUpdate:value":n[6]||(n[6]=o=>a(l).permission=o),placeholder:"请输入权限标识",allowClear:""},null,8,["value"])]),_:1})]),_:1}),e(r,{span:12},{default:t(()=>[e(i,{label:"状态",name:"status",required:""},{default:t(()=>[e(f,{value:a(l).status,"onUpdate:value":n[7]||(n[7]=o=>a(l).status=o),"button-style":"solid"},{default:t(()=>[e(u,{value:0},{default:t(()=>[d("启用")]),_:1}),e(u,{value:1},{default:t(()=>[d("停用")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),a(l).type===1?(V(),$(r,{key:0,span:12},{default:t(()=>[e(i,{label:"外链",name:"isLink",required:""},{default:t(()=>[e(f,{value:a(l).isLink,"onUpdate:value":n[8]||(n[8]=o=>a(l).isLink=o),"button-style":"solid"},{default:t(()=>[e(u,{value:1},{default:t(()=>[d("是")]),_:1}),e(u,{value:0},{default:t(()=>[d("否")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})):te("",!0),U(e(r,{span:12},{default:t(()=>[e(i,{label:"是否隐藏",name:"isShow",required:""},{default:t(()=>[e(f,{value:a(l).isShow,"onUpdate:value":n[9]||(n[9]=o=>a(l).isShow=o),"button-style":"solid"},{default:t(()=>[e(u,{value:1},{default:t(()=>[d("是")]),_:1}),e(u,{value:0},{default:t(()=>[d("否")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},512),[[h,a(l).type!==2]]),U(e(r,{span:12},{default:t(()=>[e(i,{label:"系统首页",name:"isHomePage",required:""},{default:t(()=>[e(f,{value:a(l).isHomePage,"onUpdate:value":n[10]||(n[10]=o=>a(l).isHomePage=o),"button-style":"solid"},{default:t(()=>[e(u,{value:1},{default:t(()=>[d("是")]),_:1}),e(u,{value:0},{default:t(()=>[d("否")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},512),[[h,a(l).type===1]]),U(e(r,{span:12},{default:t(()=>[e(i,{label:"缓存",name:"keepAlive",required:""},{default:t(()=>[e(f,{value:a(l).keepAlive,"onUpdate:value":n[11]||(n[11]=o=>a(l).keepAlive=o),"button-style":"solid"},{default:t(()=>[e(u,{value:1},{default:t(()=>[d("是")]),_:1}),e(u,{value:0},{default:t(()=>[d("否")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},512),[[h,a(l).type!==2]])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","title"])}}}),ke=(y,w)=>[{title:"菜单名称",dataIndex:"title",width:230,fixed:"left",customRender:({record:s})=>s.isHomePage?p("div",{class:"flex items-center gap-2"},[p(me,{title:"系统主页"},()=>p(fe,{style:"color:#fbbf24; font-size:18px"})),s.title]):s.title},{title:"图标",dataIndex:"icon",align:"center",width:70,customRender:({record:s})=>{var _;return p(G,{name:((_=s.icon)==null?void 0:_.split(":")[1])||""})}},{title:"权限标识",dataIndex:"permission",width:260},{title:"路由路径",dataIndex:"path",width:260},{title:"排序",dataIndex:"order",align:"center",width:80},{title:"启用状态",dataIndex:"status",align:"center",width:80,customRender:({record:s})=>p(E,{color:s.status?"green":"red"},()=>s.status?"启用":"停用")},{title:"是否隐藏",dataIndex:"isShow",align:"center",width:80,customRender:({record:s})=>Number(s.isShow)?p(E,{color:s.isShow?"":"red"},()=>s.isShow?"否":"是"):""},{title:"创建时间",dataIndex:"createTime",align:"center",width:150},{title:"操作",dataIndex:"action",align:"center",width:120,fixed:"right",customRender:({record:s})=>p("div",{},[p(q,{type:"link",icon:p(ce),onClick:()=>y(s)}),p(ve,{type:"vertical"}),p(ye,{title:"确定删除吗？",overlayStyle:{width:"200px"},onConfirm:()=>w(s)},()=>p(q,{type:"link",danger:!0,icon:p(ge)}))])}],Se=F({__name:"index",setup(y){const{t:w}=A(),s=v(!1),_=v([]),x=v([]),c=v(!1),k=v(!1),I=v(),R=ke(m=>{c.value=!0,k.value=!0,I.value=m},m=>{H.success("假装删除成功："+w(m.title)),g()}),S=()=>{k.value=!1,c.value=!0},g=async()=>{s.value=!0;const m=await W();x.value=m.data,s.value=!1};return be(()=>{g()}),(m,n)=>{const u=we,f=q,i=j,r=Z;return V(),$(r,{dense:""},{default:t(()=>[e(i,{columns:a(R),"data-source":a(x),bordered:"",title:"菜单管理",rowKey:"id",loading:a(s),sticky:"",scroll:{x:1300},pagination:!1,expandedRowKeys:a(_),"onUpdate:expandedRowKeys":n[0]||(n[0]=b=>M(_)?_.value=b:null),onReload:g},{"pre-tools":t(()=>[e(f,{type:"primary",onClick:S},{icon:t(()=>[e(u)]),default:t(()=>[d(" 新增 ")]),_:1})]),_:1},8,["columns","data-source","loading","expandedRowKeys"]),e(xe,{open:a(c),"onUpdate:open":n[1]||(n[1]=b=>M(c)?c.value=b:null),isEdit:a(k),data:a(I),treeData:a(x)},null,8,["open","isEdit","data","treeData"])]),_:1})}}});export{Se as default};

import{c as W,l as X,a as ee,d as M,S as oe,b as ne,T as P,_ as te}from"./index-xbJnZt5W.js";import{n as j,ae as se,I as U,x as J,v as S,R as E,o as C,J as x,K as n,k as e,bc as Z,O as o,q as _,am as d,a9 as c,a4 as D,bd as G,be as O,aS as le,aU as H,bf as ae,j as re,p as T,a7 as q,$ as ie,a8 as K,Z as de,bg as ce,ay as ue,aC as me,aa as N,aB as pe,al as _e,ag as fe,aJ as ge,aK as ve}from"./.pnpm-DTVa1Nkx.js";const ye={class:"w-full flex justify-between items-center"},he=j({__name:"PswMode",emits:["reset-password"],setup(f,{expose:u,emit:m}){const v=m,b=se(),{t:i}=U(),r=W(),{token:y}=J(r),g=S(!1),s=S(),a=E({username:"utility",password:"123456",remember:!0}),$={username:[{required:!0,message:i("login.vaildMsg.username")}],password:[{required:!0,message:i("login.vaildMsg.psw")}]},p=async l=>{const t=await X(l);y.value=t.data.token,b.push("/")},h=async()=>{g.value=!0;try{const l=await s.value.validate();p(l)}catch(l){console.warn(l)}finally{g.value=!1}};return u({login:p}),(l,t)=>{const w=D,k=G,A=O,B=le,I=H,L=Z;return C(),x(L,{ref_key:"formRef",ref:s,model:e(a),rules:$},{default:n(()=>[o(k,{name:"username"},{default:n(()=>[o(w,{value:e(a).username,"onUpdate:value":t[0]||(t[0]=z=>e(a).username=z),size:"large",placeholder:l.$t("login.placeholder.username")},null,8,["value","placeholder"])]),_:1}),o(k,{name:"password"},{default:n(()=>[o(A,{value:e(a).password,"onUpdate:value":t[1]||(t[1]=z=>e(a).password=z),size:"large",placeholder:l.$t("login.placeholder.psw")},null,8,["value","placeholder"])]),_:1}),o(k,null,{default:n(()=>[_("div",ye,[o(B,{checked:e(a).remember,"onUpdate:checked":t[2]||(t[2]=z=>e(a).remember=z)},{default:n(()=>[d("记住我")]),_:1},8,["checked"]),o(I,{type:"link",onClick:t[3]||(t[3]=z=>v("reset-password"))},{default:n(()=>[d(c(l.$t("login.forgetPsw")),1)]),_:1})])]),_:1}),o(k,null,{default:n(()=>[o(I,{class:"w-full",size:"large",type:"primary",loading:e(g),onClick:h},{default:n(()=>[d(c(l.$t("login.login")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])}}}),Y=(f=60)=>{const{t:u}=U(),m=S(u("login.getCode")),v=S(!1),b=S(),i=()=>{b.value=setInterval(()=>{f--,f===0?(v.value=!1,m.value=u("login.getCode")):(v.value=!0,m.value=u("login.regain",{second:f}))},1e3)};return ae(()=>{clearInterval(b.value)}),{wait:f,text:m,disabled:v,getCode:i}},we={class:"flex items-center justify-between gap-4"},ke=j({__name:"AuthCodeMode",setup(f){const{t:u}=U(),{text:m,disabled:v,getCode:b}=Y(),i=S(),r=E({phone:"",code:""}),y={phone:[{required:!0,message:u("login.vaildMsg.phone")}],code:[{required:!0,message:u("login.vaildMsg.code")}]},g=async()=>{try{const s=await i.value.validate();console.log(s)}catch(s){console.warn(s)}};return(s,a)=>{const $=D,p=G,h=H,l=Z;return C(),x(l,{ref_key:"formRef",ref:i,model:e(r),rules:y},{default:n(()=>[o(p,{name:"phone"},{default:n(()=>[o($,{value:e(r).phone,"onUpdate:value":a[0]||(a[0]=t=>e(r).phone=t),size:"large",placeholder:s.$t("login.placeholder.phone")},null,8,["value","placeholder"])]),_:1}),o(p,{name:"code"},{default:n(()=>[_("div",we,[o($,{value:e(r).code,"onUpdate:value":a[1]||(a[1]=t=>e(r).code=t),size:"large",placeholder:s.$t("login.placeholder.code")},null,8,["value","placeholder"]),o(h,{size:"large",disabled:e(v),onClick:e(b)},{default:n(()=>[d(c(e(m)),1)]),_:1},8,["disabled","onClick"])])]),_:1}),o(p,null,{default:n(()=>[o(h,{class:"w-full",size:"large",type:"primary",onClick:g},{default:n(()=>[d(c(s.$t("login.login")),1)]),_:1})]),_:1})]),_:1},8,["model"])}}}),Ce={class:"flex items-center justify-between gap-4"},V=j({__name:"Register",setup(f){const{t:u}=U(),{text:m,disabled:v,getCode:b}=Y(),i=S(),r=E({phone:"",code:"",password:"",confirmPsw:""}),y={phone:[{required:!0,message:u("login.vaildMsg.phone")}],code:[{required:!0,message:u("login.vaildMsg.code")}],password:[{required:!0,message:u("login.vaildMsg.psw")}],confirmPsw:[{required:!0,message:u("login.vaildMsg.confirmPsw")}]},g=async()=>{try{const s=await i.value.validate();console.log(s)}catch(s){console.warn(s)}};return(s,a)=>{const $=D,p=G,h=H,l=O,t=Z;return C(),x(t,{ref_key:"formRef",ref:i,model:e(r),rules:y},{default:n(()=>[o(p,{name:"phone"},{default:n(()=>[o($,{value:e(r).phone,"onUpdate:value":a[0]||(a[0]=w=>e(r).phone=w),size:"large",placeholder:s.$t("login.placeholder.phone")},null,8,["value","placeholder"])]),_:1}),o(p,{name:"code"},{default:n(()=>[_("div",Ce,[o($,{value:e(r).code,"onUpdate:value":a[1]||(a[1]=w=>e(r).code=w),size:"large",placeholder:s.$t("login.placeholder.code")},null,8,["value","placeholder"]),o(h,{size:"large",disabled:e(v),onClick:e(b)},{default:n(()=>[d(c(e(m)),1)]),_:1},8,["disabled","onClick"])])]),_:1}),o(p,{name:"password"},{default:n(()=>[o(l,{value:e(r).password,"onUpdate:value":a[2]||(a[2]=w=>e(r).password=w),size:"large",placeholder:s.$t("login.placeholder.psw")},null,8,["value","placeholder"])]),_:1}),o(p,{name:"confirmPsw"},{default:n(()=>[o(l,{value:e(r).confirmPsw,"onUpdate:value":a[3]||(a[3]=w=>e(r).confirmPsw=w),size:"large",placeholder:s.$t("login.placeholder.confirmPsw")},null,8,["value","placeholder"])]),_:1}),o(p,null,{default:n(()=>[o(h,{class:"w-full",size:"large",type:"primary",onClick:g},{default:n(()=>[d(c(s.$t("login.login")),1)]),_:1})]),_:1})]),_:1},8,["model"])}}}),be=f=>(ge("data-v-7b53b4ab"),f=f(),ve(),f),$e={class:"login-bg flex items-center justify-center pos-relative"},Se={class:"bg-#fff dark:bg-#18181c w-md rounded-3 p-6"},ze={class:"flex items-center gap-4"},Me={class:"anim-into w-full flex items-center gap-3 mt-5"},xe={class:"anim-into flex items-center justify-center gap-3"},Re={class:"pos-absolute top-0 right-0 my-4 mx-6 flex items-center gap-4"},Ie={key:0,class:"i-ri:sun-foggy-fill color-#fff"},Ue={key:1,class:"i-ri:moon-clear-fill color-amber"},Le=be(()=>_("div",{class:"i-ri:translate-2 color-#fff"},null,-1)),Pe=[Le],F="text-2xl rounded-2 flex justify-center items-center cursor-pointer",Te=j({__name:"index",setup(f){const u="Utility Admin",{t:m,locale:v}=U(),b=ee(),{config:i,getThemeMode:r}=J(b),y=re(oe.SYS_LANG,M.ZH),g=S(),s=S(0),a={0:{title:m("login.mode.psw"),component:he},1:{title:m("login.mode.authCode"),component:ke},2:{title:m("login.mode.register"),component:V},3:{title:m("login.mode.reset"),component:V}},$=()=>{i.value.theme=i.value.theme===P.LIGHT?P.DARK:P.LIGHT,i.value.lightSidebar=!0},p=({key:l})=>{y.value=l,v.value=l,location.reload()},h=l=>{switch(l){case 0:g.value.login({username:"utility",password:"123456"});break;case 1:g.value.login({username:"admin",password:"123456"});break;case 2:g.value.login({username:"user",password:"123456"});break}};return(l,t)=>{const w=ne,k=H,A=ce,B=ue,I=pe,L=_e,z=fe,Q=me;return C(),T("div",$e,[_("div",Se,[_("div",ze,[o(w,{name:"logo",size:56}),_("span",{class:"text-3xl",style:q({color:e(i).themeColor})},c(e(u)),5)]),_("div",{class:"text-xl my-5",style:q({color:e(i).themeColor})},c(a[e(s)].title),5),(C(),x(ie(a[e(s)].component),{ref_key:"formComRef",ref:g,class:"anim-into",onResetPassword:t[0]||(t[0]=R=>s.value=3)},null,544)),e(s)!==0?(C(),x(k,{key:0,class:"w-full anim-into",size:"large",onClick:t[1]||(t[1]=R=>s.value=0)},{default:n(()=>[d(c(l.$t("common.back")),1)]),_:1})):K("",!0),e(s)===0?(C(),T(de,{key:1},[_("div",Me,[o(k,{class:"w-full",size:"large",onClick:t[2]||(t[2]=R=>s.value=1)},{default:n(()=>[d(c(l.$t("login.mode.authCode")),1)]),_:1}),o(k,{class:"w-full",size:"large",onClick:t[3]||(t[3]=R=>s.value=2)},{default:n(()=>[d(c(l.$t("login.mode.register")),1)]),_:1})]),o(A,{class:"anim-into",style:{"margin-top":"20px"},plain:""},{default:n(()=>[d(c(l.$t("login.fastLogin")),1)]),_:1}),_("div",xe,[o(k,{type:"primary",onClick:t[4]||(t[4]=R=>h(0))},{default:n(()=>[d(c(l.$t("login.fastMode.superAdmin")),1)]),_:1}),o(k,{type:"primary",onClick:t[5]||(t[5]=R=>h(1))},{default:n(()=>[d(c(l.$t("login.fastMode.admin")),1)]),_:1}),o(k,{type:"primary",onClick:t[6]||(t[6]=R=>h(2))},{default:n(()=>[d(c(l.$t("login.fastMode.user")),1)]),_:1})])],64)):K("",!0)]),_("div",Re,[o(B,null,{title:n(()=>[d(c(l.$t("common.config.theme.desc")),1)]),default:n(()=>[_("div",{class:N(F),onClick:$},[e(r)===e(P).LIGHT?(C(),T("div",Ie)):(C(),T("div",Ue))])]),_:1}),o(Q,{trigger:["click"]},{overlay:n(()=>[o(z,{onClick:p},{default:n(()=>[(C(),x(L,{key:e(M).ZH,style:q({color:e(y)===e(M).ZH?e(i).themeColor:""})},{icon:n(()=>[o(I,{class:N([e(y)!==e(M).ZH&&"opacity-0"])},null,8,["class"])]),default:n(()=>[d(" 简体中文 ")]),_:1},8,["style"])),(C(),x(L,{key:e(M).EN,style:q({color:e(y)===e(M).EN?e(i).themeColor:""})},{icon:n(()=>[o(I,{class:N([e(y)!==e(M).EN&&"opacity-0"])},null,8,["class"])]),default:n(()=>[d(" English ")]),_:1},8,["style"]))]),_:1})]),default:n(()=>[_("div",{class:N(F)},Pe)]),_:1})])])}}}),je=te(Te,[["__scopeId","data-v-7b53b4ab"]]);export{je as default};

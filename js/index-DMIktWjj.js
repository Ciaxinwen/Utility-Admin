import{k as z,b as W,h as j}from"./index-DyK0Gy19.js";import{_ as X}from"./Table-B895UtaU.js";import{u as G,a as J}from"./useFormValue-DjAZgB4w.js";import{d as E,ah as V,a9 as Q,C as Y,r as v,A as Z,o as q,a7 as P,a8 as t,c as e,u as a,W as i,w as h,R as U,t as ee,l as te,h as p,s as ae,X as M}from"./@vue-D377Yz3Q.js";import{u as K}from"./vue-i18n-DLwGe23y.js";import{a as L,a4 as le,a5 as ne,N as oe,a1 as se,a2 as ue,I as ie,a3 as de,a7 as re,w as pe,K as me,m as _e,o as fe,h as A,v as $,P as ce,a6 as ve}from"./ant-design-vue-CqquSaJW.js";import{ak as ye,a9 as ge,D as we,d as be}from"./@ant-design-68FpZE7s.js";/* empty css                */import"./lodash-BA5lSfMf.js";import"./@amap-Cfb1MzxV.js";import"./dayjs-CnD8zroB.js";import"./pinia-B1Iyq0wd.js";import"./vue-demi-Dq6ymT-8.js";import"./@vueuse-BRxBMKk3.js";import"./pinia-plugin-persistedstate-RV7uh3T-.js";import"./axios-DsPaXkF5.js";import"./vue-router-CZk6BKTr.js";import"./nprogress-DsTy4vSK.js";import"./mockjs-Bm9OmztK.js";import"./@babel-BiFW4_mA.js";import"./lodash-es-BtLQVgmQ.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./@ctrl-DOFZgDuz.js";import"./throttle-debounce-CUWDS_la.js";import"./vue-types-C5fUfLeo.js";import"./dom-align-CRCehRfe.js";import"./async-validator-DKvM95Vc.js";import"./scroll-into-view-if-needed-SxpMpKWN.js";import"./compute-scroll-into-view-1gs_hJI2.js";import"./@emotion-BtrR-yrm.js";import"./stylis-DsJDcYJc.js";import"./@intlify-DCihH9S3.js";import"./vue-draggable-plus-WlOHM_yN.js";const xe=E({__name:"SetMenuModal",props:V({isEdit:{type:Boolean,default:!1},data:{type:Object,default:()=>({})},treeData:{type:Array,default:()=>[]}},{open:{type:Boolean},openModifiers:{}}),emits:V(["reload"],["update:open"]),setup(y,{emit:b}){const s=y,m=Q(y,"open"),x=Y(()=>s.isEdit?"编辑菜单":"新增菜单"),c=b,{t:k}=K(),I=v(),{form:l,resetFormValue:D,setFormValue:R}=G({title:"",type:0,path:"",parentId:null,icon:"",order:null,permission:"",status:0,isShow:1,isHomePage:1,keepAlive:1,isLink:0}),S=async()=>{await I.value.validate(),L.success("操作成功"),c("reload"),g()},g=()=>{D(),m.value=!1};return Z(()=>m.value,()=>{m.value&&s.isEdit&&(R(s.data),l.value.title=k(s.data.title))}),(_,n)=>{const u=le,f=ne,d=oe,r=se,w=ue,C=ie,B=de,F=z,H=re,N=pe,O=me,T=_e;return q(),P(T,{open:m.value,"onUpdate:open":n[12]||(n[12]=o=>m.value=o),title:a(x),width:"750px",onOk:S,onCancel:g},{default:t(()=>[e(O,{class:"mt-6",ref_key:"formRef",ref:I,model:a(l),layout:"horizontal","label-col":{span:7}},{default:t(()=>[e(w,null,{default:t(()=>[e(r,{span:12},{default:t(()=>[e(d,{label:"菜单类型",name:"type",required:""},{default:t(()=>[e(f,{value:a(l).type,"onUpdate:value":n[0]||(n[0]=o=>a(l).type=o),"button-style":"solid"},{default:t(()=>[e(u,{value:0},{default:t(()=>[i("目录")]),_:1}),e(u,{value:1},{default:t(()=>[i("菜单")]),_:1}),e(u,{value:2},{default:t(()=>[i("按钮")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),e(w,{gutter:24},{default:t(()=>[e(r,{span:12},{default:t(()=>[e(d,{label:"菜单名称",name:"title",required:""},{default:t(()=>[e(C,{value:a(l).title,"onUpdate:value":n[1]||(n[1]=o=>a(l).title=o),placeholder:"请输入菜单名称",allowClear:""},null,8,["value"])]),_:1})]),_:1}),h(e(r,{span:12},{default:t(()=>[e(d,{label:"路径",name:"path",required:""},{default:t(()=>[e(C,{value:a(l).path,"onUpdate:value":n[2]||(n[2]=o=>a(l).path=o),placeholder:"请输入路径",allowClear:""},null,8,["value"])]),_:1})]),_:1},512),[[U,a(l).type!==2]]),e(r,{span:12},{default:t(()=>[e(d,{label:"上级菜单",name:"parentId"},{default:t(()=>[e(B,{value:a(l).parentId,"onUpdate:value":n[3]||(n[3]=o=>a(l).parentId=o),placeholder:"请选择部门","allow-clear":"","tree-data":y.treeData,"tree-node-filter-prop":"title","field-names":{children:"children",label:"title",value:"id"}},{title:t(({title:o})=>[i(ee(_.$t(o)),1)]),_:1},8,["value","tree-data"])]),_:1})]),_:1}),h(e(r,{span:12},{default:t(()=>[e(d,{label:"图标",name:"icon"},{default:t(()=>[e(H,null,{default:t(()=>[e(F,{modelValue:a(l).icon,"onUpdate:modelValue":n[4]||(n[4]=o=>a(l).icon=o)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},512),[[U,a(l).type!==2]]),e(r,{span:12},{default:t(()=>[e(d,{label:"排序",name:"order",required:""},{default:t(()=>[e(N,{value:a(l).order,"onUpdate:value":n[5]||(n[5]=o=>a(l).order=o),min:1,placeholder:"请输入排序",style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),e(r,{span:12},{default:t(()=>[e(d,{label:"权限标识",name:"permission",required:""},{default:t(()=>[e(C,{value:a(l).permission,"onUpdate:value":n[6]||(n[6]=o=>a(l).permission=o),placeholder:"请输入权限标识",allowClear:""},null,8,["value"])]),_:1})]),_:1}),e(r,{span:12},{default:t(()=>[e(d,{label:"状态",name:"status",required:""},{default:t(()=>[e(f,{value:a(l).status,"onUpdate:value":n[7]||(n[7]=o=>a(l).status=o),"button-style":"solid"},{default:t(()=>[e(u,{value:0},{default:t(()=>[i("启用")]),_:1}),e(u,{value:1},{default:t(()=>[i("停用")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),a(l).type===1?(q(),P(r,{key:0,span:12},{default:t(()=>[e(d,{label:"外链",name:"isLink",required:""},{default:t(()=>[e(f,{value:a(l).isLink,"onUpdate:value":n[8]||(n[8]=o=>a(l).isLink=o),"button-style":"solid"},{default:t(()=>[e(u,{value:1},{default:t(()=>[i("是")]),_:1}),e(u,{value:0},{default:t(()=>[i("否")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})):te("",!0),h(e(r,{span:12},{default:t(()=>[e(d,{label:"是否隐藏",name:"isShow",required:""},{default:t(()=>[e(f,{value:a(l).isShow,"onUpdate:value":n[9]||(n[9]=o=>a(l).isShow=o),"button-style":"solid"},{default:t(()=>[e(u,{value:1},{default:t(()=>[i("是")]),_:1}),e(u,{value:0},{default:t(()=>[i("否")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},512),[[U,a(l).type!==2]]),h(e(r,{span:12},{default:t(()=>[e(d,{label:"系统首页",name:"isHomePage",required:""},{default:t(()=>[e(f,{value:a(l).isHomePage,"onUpdate:value":n[10]||(n[10]=o=>a(l).isHomePage=o),"button-style":"solid"},{default:t(()=>[e(u,{value:1},{default:t(()=>[i("是")]),_:1}),e(u,{value:0},{default:t(()=>[i("否")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},512),[[U,a(l).type===1]]),h(e(r,{span:12},{default:t(()=>[e(d,{label:"缓存",name:"keepAlive",required:""},{default:t(()=>[e(f,{value:a(l).keepAlive,"onUpdate:value":n[11]||(n[11]=o=>a(l).keepAlive=o),"button-style":"solid"},{default:t(()=>[e(u,{value:1},{default:t(()=>[i("是")]),_:1}),e(u,{value:0},{default:t(()=>[i("否")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},512),[[U,a(l).type!==2]])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","title"])}}}),ke=(y,b)=>[{title:"菜单名称",dataIndex:"title",width:230,fixed:"left",customRender:({record:s})=>s.isHomePage?p("div",{class:"flex items-center gap-2"},[p(fe,{title:"系统主页"},()=>p(ye,{style:"color:#fbbf24; font-size:18px"})),s.title]):s.title},{title:"图标",dataIndex:"icon",align:"center",width:70,customRender:({record:s})=>{var m;return p(W,{name:((m=s.icon)==null?void 0:m.split(":")[1])||""})}},{title:"权限标识",dataIndex:"permission",width:260},{title:"路由路径",dataIndex:"path",width:260},{title:"排序",dataIndex:"order",align:"center",width:80},{title:"启用状态",dataIndex:"status",align:"center",width:80,customRender:({record:s})=>p(A,{color:s.status?"green":"red"},()=>s.status?"启用":"停用")},{title:"是否隐藏",dataIndex:"isShow",align:"center",width:80,customRender:({record:s})=>Number(s.isShow)?p(A,{color:s.isShow?"":"red"},()=>s.isShow?"否":"是"):""},{title:"创建时间",dataIndex:"createTime",align:"center",width:150},{title:"操作",dataIndex:"action",align:"center",width:120,fixed:"right",customRender:({record:s})=>p("div",{},[p($,{type:"link",icon:p(ge),onClick:()=>y(s)}),p(ce,{type:"vertical"}),p(ve,{title:"确定删除吗？",overlayStyle:{width:"200px"},onConfirm:()=>b(s)},()=>p($,{type:"link",danger:!0,icon:p(we)}))])}],at=E({__name:"index",setup(y){const{t:b}=K(),s=v(!1),m=v([]),x=v([]),c=v(!1),k=v(!1),I=v(),R=ke(_=>{c.value=!0,k.value=!0,I.value=_},_=>{L.success("假装删除成功："+b(_.title)),g()}),S=()=>{k.value=!1,c.value=!0},g=async()=>{s.value=!0;const _=await J();x.value=_.data,s.value=!1};return ae(()=>{g()}),(_,n)=>{const u=be,f=$,d=X,r=j;return q(),P(r,{dense:""},{default:t(()=>[e(d,{columns:a(R),"data-source":a(x),bordered:"",title:"菜单管理",rowKey:"id",loading:a(s),sticky:"",scroll:{x:1300},pagination:!1,expandedRowKeys:a(m),"onUpdate:expandedRowKeys":n[0]||(n[0]=w=>M(m)?m.value=w:null),onReload:g},{"pre-tools":t(()=>[e(f,{type:"primary",onClick:S},{icon:t(()=>[e(u)]),default:t(()=>[i(" 新增 ")]),_:1})]),_:1},8,["columns","data-source","loading","expandedRowKeys"]),e(xe,{open:a(c),"onUpdate:open":n[1]||(n[1]=w=>M(c)?c.value=w:null),isEdit:a(k),data:a(I),treeData:a(x)},null,8,["open","isEdit","data","treeData"])]),_:1})}}});export{at as default};
